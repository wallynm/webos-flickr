
// source/data/data.js
enyo.kind({name:"smartView.FlickrAPI",kind:"enyo.JsonpSource",urlRoot:"https://api.flickr.com/services/rest/",fetch:function(e,t){t.callbackName="jsoncallback",t.params=enyo.clone(e.params),t.params.api_key="2a21b46e58d207e4888e1ece0cb149a5",t.params.format="json",this.inherited(arguments)}}),new smartView.FlickrAPI({name:"flickr"}),enyo.kind({name:"smartView.SearchCollection",kind:"enyo.Collection",model:"smartView.ImageModel",source:"flickr",options:{parse:!0},published:{searchText:null},searchTextChanged:function(){this.empty({destroy:!0}),this.fetch()},fetch:function(){return console.warn("fetch"),this.params={method:"flickr.photos.search",sort:"interestingness-desc",per_page:50,text:this.searchText},this.inherited(arguments)},parse:function(e){return e&&e.photos&&e.photos.photo}}),enyo.kind({name:"smartView.ImageModel",kind:"enyo.Model",options:{parse:!0},source:"flickr",computed:[{method:"thumbnail",path:["farm","server","id","secret"]},{method:"original",path:["farm","server","id","secret"]}],thumbnail:function(){return"https://farm"+this.get("farm")+".static.flickr.com/"+this.get("server")+"/"+this.get("id")+"_"+this.get("secret")+"_m.jpg"},original:function(){return"https://farm"+this.get("farm")+".static.flickr.com/"+this.get("server")+"/"+this.get("id")+"_"+this.get("secret")+".jpg"},fetch:function(){return this.params={method:"flickr.photos.getinfo",photo_id:this.get("id")},this.inherited(arguments)},parse:function(e){return e=e.photo||e,e.title=e.title._content||e.title,e.username=e.owner&&e.owner.realname,e.taken=e.dates&&e.dates.taken,console.warn(e),e}});

// source/views/mainView.js
enyo.kind({name:"smartView.MainView",classes:"moon enyo-fit",components:[{kind:"moon.Panels",classes:"enyo-fit",pattern:"alwaysviewing",popOnBack:!0,components:[{kind:"smartView.SearchPanel"}]}],handlers:{onRequestPushPanel:"pushPanel"},pushPanel:function(e,t){this.$.panels.pushPanel(t.panel)}});

// source/views/searchPanel.js
enyo.kind({name:"smartView.SearchPanel",kind:"moon.Panel",title:"Search Flickr",titleBelow:"Enter search term above",headerOptions:{inputMode:!0,dismissOnEnter:!0},components:[{kind:"moon.DataGridList",fit:!0,name:"SearchPanelGrid",minWidth:250,minHeight:300,ontap:"itemSelected",components:[{kind:"moon.GridListImageItem",imageSizing:"cover",useSubCaption:!1,centered:!1,bindings:[{from:"model.title",to:"caption"},{from:"model.thumbnail",to:"source"}]}]}],events:{onRequestPushPanel:""},handlers:{onInputHeaderChange:"search"},headerComponents:[{kind:"moon.Spinner",content:"Loading...",name:"spinner"}],bindings:[{from:"photos",to:"$.SearchPanelGrid.collection"},{from:"photos.status",to:"$.spinner.showing",transform:function(){return this.photos.isBusy()}}],pushPanel:function(e,t){this.$.panels.pushPanel(t.panel)},create:function(){this.inherited(arguments),this.set("photos",new smartView.SearchCollection)},itemSelected:function(e,t){this.doRequestPushPanel({panel:{kind:"smartView.DetailPanel",model:t.model}})},search:function(e,t){this.$.SearchPanelGrid.collection.set("searchText",t.originator.get("value"))}});

// source/views/detailPanel.js
enyo.kind({name:"smartView.DetailPanel",kind:"moon.Panel",layoutKind:"FittableColumnsLayout",components:[{kind:"moon.Image",fit:!0,sizing:"contain",name:"image"}],bindings:[{from:"model.title",to:"title"},{from:"model.original",to:"$.image.src"},{from:"model.username",to:"titleBelow",transform:function(e){return"By "+(e||" unknown user")}},{from:"model.taken",to:"subTitleBelow",transform:function(e){return e?"Taken "+e:""}}],transitionFinished:function(e){console.warn(e.from<e.to),e.from<e.to&&this.model.fetch()}});

// source/app.js
enyo.kind({name:"smartView.Application",kind:"enyo.Application",view:"smartView.MainView"}),enyo.ready(function(){new smartView.Application({name:"app"})});
